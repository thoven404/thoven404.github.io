# 数据抽象

类的基本思想：**数据抽象** 和 **封装**  

**数据抽象**：一种依赖于 **接口** 和 **实现** 分离的编程以及设计技术  
- **接口**：用户所能执行的操作  
- **实现**：数据成员、接口函数、私有函数  

**封装**：实现对类的接口和实现的分离

## 定义抽象数据类型
1. **抽象数据类型**：需要封装（隐藏）数据成员，使用户不能直接访问数据成员，而是通过接口使用对象。
- `public` 访问说明符指定类的接口  
- `private` 访问说明符封装了类的实现细节  
    
    封装的优点：（1）确保用户的代码不会无意间破坏封装对象的状态；（2）被封装类的具体实现细节可以随时改变，而无需调整用户级别的代码。
  
2. 成员函数的声明必须在类的内部，定义既可以在类的内部也可以在类的外部。
  
3. 定义在类内部的函数是隐式的 **`inline` 函数**。
  
4. 任何对类成员的直接访问都被看做 `this` 的隐式引用。  
    `this` 是一个常量指针，不允许改变其保存的地址。
  
5. **`cost` 成员函数**：参数列表后加一个 `cost` 关键字，作用是修改隐式 `this` 指针的类型为指向常量的常量指针，使其不能改变对象的数据成员。

6. **默认构造函数** 初始化规则：如果存在类内初始值，就用它来初始化成员，否则就执行默认初始化。
    只有当类没有声明任何构造函数时，编译器才会自动生成默认构造函数。
    如果声明了构造函数，可以使用 `== default` 要求编译器生成默认构造函数，如 `Sales_data() = default;`

7. 构造函数初始值列表
    ```cpp
    Sales_data(const string &s, unsigned n, double p):
                bookNo(s), units_sold(n), revenue(p*n) {}
    ```

8. 除了定义类的对象的初始化，类还需要控制拷贝、赋值和销毁对象时发生的行为。
- 拷贝：初始化变量以及以值的方式传递或者返回一个对象
- 赋值：使用赋值运算符
- 销毁：对象不再存在时  
    
    如果不主动定义这些操作，则编译器会自动合成它们。

9. `class` 和 `struct` 的唯一区别：默认访问权限不一样。
    `struct` 的默认访问权限是 `public` 的，而 `class` 的默认访问权限是 `private` 的。

10. 类可以允许其他类或者函数访问它的非公有成员，方法是令其他类或者函数称为它的友元。
    友元声明：在类定义的内部，在函数声明语句之前加上关键字 `friend` 即可。友元不是类的成员，不受它所在区域访问控制级别的约束。
